---
attachments: [Clipboard_2020-01-12-19-39-53.png, Clipboard_2020-01-16-14-58-36.png]
title: build-04-10-单进程运行时总结分享
created: '2020-01-11T02:22:03.942Z'
modified: '2020-03-15T04:06:47.967Z'
---

# build-04-10-单进程运行时总结分享

## 背景以及目标

## 调研以及起步

## 整体设计

一个定义时 两个运行时
- 单进程纯内存运行时转换层 => 单进程纯内存运行时(不带持久化)
- MySQL协同多进程运行时转换层 => MySQL协同多进程运行时运行时(TODO用MySQL持久化流程记录和日志等)

## 实现

![](@attachment/Clipboard_2020-01-16-14-58-36.png)

## 和原项目对比以及下一步计划

| 核心功能对比                        | 原项目         | 本项目         |
| --------------------------------- |:-------------:|:-------------:|
| DAG的编排和执行能力                  | 有            | 有             |
| 流程级别的参数和校验                  | 有             | 有             |
| 步骤级别的参数和校验                  | 校验无系统级别支持 | 有             |
| 步骤间参数的上下文参数传递             | 有             | 计划           |
| 定义时动态生成步骤                   | 有             | 计划           |
| 运行时动态填充步骤                   | 有             | 计划           |
| 外部输入步骤                         | 有             | 计划           |
| 单步骤重试                          | 有             | 有             |
| sequence重试                       | 暂无            | 有             |
| 单步骤expansion                    | 有             | 无             |
| sequence expansion                | 暂无            | 有           |
| 单进程纯内存运行时                    | 无              | 有           |
| MySQL协同多进程运行时                | 有              | 计划           |
| 单进程并发执行能力(like goroutine)   | 无             | 有           |
| 不同并发能力的运行池运行不同类别的流程   |  有            | 暂无           |
| 多进程运行时sequence连续执行节省上下文切换   |  有            | 暂无           |
| 定义时和运行时各关键步骤暴露hook        | 有             | 计划          |


## FAQ

- 为啥本项目比原项目概念多了很多的样子？
  - 本文档将一些内部细节暴露出来了，比如具体流程实现者之前应该是不太会接触到运行时。
  - 本项目借鉴了spincycle的一些概念来进行组件划分，虽然基本上原项目这些功能都有，但是没有划分得这么清楚。
  - 本项目采用golang，由于目前golang强静态类型系统的一些特征，比如在定义参数就会需要多引入一些具名的type。

